# Story 9.2: Define Comprehensive CSS Variable System

## Status
Ready for Development

## Story

**As a** developer,
**I want** all colors, dimensions, and design tokens defined as CSS variables,
**so that** the interface can be themed via variable overrides

## Acceptance Criteria

1. Define CSS variables in `:root` for all design tokens:
   - Colors: `--pale-white`, `--dark-green`, `--burnt-red`, `--darkness`
   - Dimensions: `--hole-size`, `--corner-ring-size`, `--radius-sm`, `--radius-md`
   - Typography: `--font-family`, `--font-size-base`, `--font-size-lg`
   - Spacing: `--spacing-sm`, `--spacing-md`, `--spacing-lg`
   - Z-index: `--z-panel`, `--z-modal`, `--z-splash`
2. Replace all hardcoded colors with `var(--variable-name)`
3. Replace all hardcoded dimensions with CSS variables
4. Document CSS variable system in `bmad/architecture/css-variables.md`
5. Application renders identically before/after variable replacement

## Tasks / Subtasks

- [ ] **Task 1: Define :root CSS variables** (AC: 1)
  - [ ] Add `:root { }` block at top of `static/css/base.css`
  - [ ] Define color variables:
    ```css
    --pale-white: #d1d8e0;
    --dark-green: #0e4a2b;
    --burnt-red: #8b2e2e;
    --darkness: #1a1a1a;
    ```
  - [ ] Define dimension variables:
    ```css
    --hole-size: 16px;
    --corner-ring-size: 40px;
    --radius-sm: 2px;
    --radius-md: 4px;
    ```
  - [ ] Define typography variables:
    ```css
    --font-family: 'marvelregular', sans-serif;
    --font-size-base: 14px;
    --font-size-lg: 18px;
    ```
  - [ ] Define spacing variables:
    ```css
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    ```
  - [ ] Define z-index variables:
    ```css
    --z-panel: 10;
    --z-modal: 100;
    --z-splash: 1000;
    ```

- [ ] **Task 2: Replace hardcoded colors** (AC: 2)
  - [ ] Search for all hex colors (#d1d8e0, #0e4a2b, etc.)
  - [ ] Replace with `var(--pale-white)`, `var(--dark-green)`, etc.
  - [ ] Search for RGB/RGBA colors
  - [ ] Replace with CSS variable equivalents

- [ ] **Task 3: Replace hardcoded dimensions** (AC: 3)
  - [ ] Search for pixel values (16px, 40px, 2px, 4px)
  - [ ] Replace with `var(--hole-size)`, `var(--radius-sm)`, etc.
  - [ ] Verify border-radius, padding, margin use variables

- [ ] **Task 4: Create CSS variables documentation** (AC: 4)
  - [ ] Create `bmad/architecture/css-variables.md`
  - [ ] Document all CSS variables with purpose
  - [ ] Include usage examples
  - [ ] Document naming conventions

- [ ] **Task 5: Visual regression testing** (AC: 5)
  - [ ] Screenshot before variable replacement
  - [ ] Apply CSS variable changes
  - [ ] Screenshot after replacement
  - [ ] Compare pixel-by-pixel (should be identical)
  - [ ] Test all UI states (playing, paused, etc.)

## Dev Notes

### CSS Variable Naming Conventions
[Source: architecture/frontend-architecture.md#styling-guidelines]

Variables should be **semantic** (describe purpose, not value):
- ✅ `--color-primary`, `--spacing-md`
- ❌ `--green-500`, `--16px`

Use double-dash prefix: `--variable-name`

### Complete CSS Variable List
[Source: architecture/frontend-architecture.md#css-variable-system]

```css
:root {
  /* Colors */
  --pale-white: #d1d8e0;
  --dark-green: #0e4a2b;
  --burnt-red: #8b2e2e;
  --darkness: #1a1a1a;

  /* Dimensions */
  --hole-size: 16px;
  --corner-ring-size: 40px;
  --radius-sm: 2px;
  --radius-md: 4px;

  /* Typography */
  --font-family: 'marvelregular', sans-serif;
  --font-size-base: 14px;
  --font-size-lg: 18px;

  /* Spacing */
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;

  /* Z-index layers */
  --z-panel: 10;
  --z-modal: 100;
  --z-splash: 1000;
}
```

### CSS Variable Usage Pattern
[Source: architecture/frontend-architecture.md#skin-css-override-pattern]

**In base.css:**
```css
body {
  background-color: var(--darkness);
  color: var(--pale-white);
}

.card {
  border-radius: var(--radius-sm);
  padding: var(--spacing-md);
}
```

**Future skin override:**
```css
:root {
  --pale-white: #00ff00;  /* Override to green */
  --hole-size: 20px;      /* Increase size */
}
```

### Accessibility Considerations
[Source: epic-9-code-architecture-refactor.md#acceptance-criteria]

- Ensure contrast ratios meet WCAG AA
- `--pale-white` on `--darkness` must have 4.5:1 contrast minimum
- Test with browser accessibility tools

### Browser Compatibility
[Source: architecture/tech-stack.md#browser-compatibility]

CSS variables (Custom Properties) supported in:
- ✅ Chrome 49+ (2016)
- ✅ Firefox 31+ (2014)
- ✅ Safari 9.1+ (2016)

All target browsers support CSS variables. No polyfill needed.

## Testing

### Testing Standards
[Source: architecture/frontend-architecture.md#testing-requirements]

**Manual Testing:**

1. **Visual Regression:**
   - Verify all colors render identically
   - Check borders, backgrounds, text colors
   - Test hover states, active states

2. **Variable Inspection:**
   - Open DevTools → Computed tab
   - Verify CSS variables resolve correctly
   - Check `var(--pale-white)` → `#d1d8e0`

3. **Dynamic Override Test (Proof of Concept):**
   - In DevTools console: `document.documentElement.style.setProperty('--pale-white', '#00ff00')`
   - Verify UI updates to green text
   - Revert: `document.documentElement.style.removeProperty('--pale-white')`

### Expected Outcomes

- ✅ `:root` contains 15+ CSS variables
- ✅ No hardcoded colors in base.css (all use `var()`)
- ✅ No hardcoded dimensions (spacing, radii use `var()`)
- ✅ Application looks identical
- ✅ CSS variables can be overridden dynamically

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-09 | 1.0 | Story created for Epic 9 | Bob (SM) |

## Dev Agent Record

### Agent Model Used
(To be filled by dev agent)

### Debug Log References
(To be filled by dev agent)

### Completion Notes List
(To be filled by dev agent)

### File List
(To be filled by dev agent)

## QA Results
(To be filled by QA agent)
