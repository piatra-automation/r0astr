stages:
  - deploy

pages:
  stage: deploy
  image: node:20-bullseye
  before_script:
    - npm install
  script:
    # Build r0astr app with Vite
    - npm run build

    # Create docs/app directory and copy built app
    - mkdir -p docs/app
    - cp -r dist/* docs/app/

    # Copy docs to public/ (GitLab Pages expects public/)
    - cp -r docs public
  artifacts:
    paths:
      - public
  rules:
    - if: $CI_COMMIT_BRANCH == "master"
