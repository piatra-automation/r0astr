# Story 10.1: Dedicated Skin Files for Remote Panel

## Overview

Skins currently only style the main r0astr interface. The remote control panel (`/remote`) uses hardcoded inline CSS, creating visual inconsistency when users switch themes. Skin authors need the ability to provide dedicated remote panel styling.

## Current State

### Remote Panel (`remote.html`)
- **390+ lines of inline CSS** - completely self-contained
- Hardcoded colors: `#0a0a0a`, `#4CAF50`, `#51cf66`, etc.
- No connection to skin system
- Loaded as separate page, not part of main app

### Skin System (Current)
```
public/skins/{skin-name}/
├── skin.json           # Manifest with templates, cssVariables, hoverTargets
├── theme.css           # Main app styles
└── templates/
    ├── panel.html
    ├── slider.html
    └── slider-collapsed.html
```

## Requirements

### R1: Remote Panel Theming
Skins can provide dedicated CSS for the remote control panel.

### R2: Full Control for Skin Authors
Skin authors can completely restyle the remote panel, not just override variables.

### R3: Graceful Fallback
If a skin doesn't provide `remote.css`, use the default styling.

### R4: Settings Modal (Lower Priority)
Settings modal theming via CSS variables is a nice-to-have, not critical.

## Design: Dedicated Skin Files

### Extended skin.json Schema

```json
{
  "name": "Glass",
  "version": "1.0.0",
  "templates": {
    "panel": "panel.html",
    "slider": "slider.html",
    "sliderCollapsed": "slider-collapsed.html"
  },
  "css": {
    "remote": "remote.css"    // NEW - optional dedicated remote styling
  }
}
```

### Remote Panel Architecture

```
remote.html
├── Loads: static/css/remote-base.css     (extracted from current inline)
├── Reads: localStorage('r0astr-settings') → skin name
├── Loads: /skins/{name}/remote.css       (if exists, overrides base)
└── Falls back to base styling if no skin remote.css
```

### File Structure After Implementation

```
public/skins/default/
├── skin.json
├── theme.css
├── remote.css              # NEW - default remote styling
└── templates/...

public/skins/glass/
├── skin.json
├── theme.css
├── remote.css              # NEW - glass remote styling
└── templates/...

static/css/
├── base.css
├── variables.css
├── components.css
├── panels.css
└── remote-base.css         # NEW - extracted from remote.html inline
```

## Implementation Plan

### Task 1: Extract Remote Base CSS
- [x] Create `static/css/remote-base.css` from remote.html inline styles
- [x] Keep all current styling intact (just move to external file)
- [x] Update remote.html to load external CSS via `<link>`
- [x] Test remote page still works identically

### Task 2: Add Skin Loading to Remote Page
- [x] Add inline script to remote.html that:
  - Reads `localStorage('r0astr-settings')`
  - Extracts skin name (default: 'default')
  - Attempts to load `/skins/{name}/remote.css`
  - Handles 404 gracefully (skin doesn't have remote.css)
- [x] Add `<link id="skin-remote-css">` placeholder in `<head>`

### Task 3: Create Default Skin remote.css
- [x] Create `public/skins/default/remote.css`
- [x] Copy base styles or create matching theme
- [x] Update `public/skins/default/skin.json` with `css.remote`

### Task 4: Create Glass Skin remote.css
- [x] Create `public/skins/glass/remote.css`
- [x] Style remote panel to match glass aesthetic
- [x] Update `public/skins/glass/skin.json` with `css.remote`

### Task 5: Documentation
- [ ] Update skin authoring docs with `css.remote` option
- [ ] Document remote.css structure and selectors

### Task 6 (Optional): Settings Modal CSS Variables
- [ ] Audit modal styles in components.css
- [ ] Convert key colors to CSS variables
- [ ] Low priority - modal already inherits some theme styles

## Remote Page Skin Loading Flow

```javascript
// In remote.html <script>
(function loadRemoteSkin() {
  const settingsKey = 'r0astr_settings';
  const settings = JSON.parse(localStorage.getItem(settingsKey) || '{}');
  const skinName = settings.skin || 'default';

  const link = document.createElement('link');
  link.id = 'skin-remote-css';
  link.rel = 'stylesheet';
  link.href = `/skins/${skinName}/remote.css`;

  // Handle missing remote.css gracefully
  link.onerror = () => {
    console.log(`[Remote] No remote.css for skin '${skinName}', using base styles`);
  };

  document.head.appendChild(link);
})();
```

## CSS Selectors Available to Skin Authors

Remote panel exposes these key selectors:

```css
/* Layout */
body { }
.container { }
header { }
.panels { }
.global-controls { }

/* Connection status */
.connection-status { }
.connection-status.connected { }
.connection-status.disconnected { }

/* Panel controls */
.panel-control { }
.panel-control.playing { }
.panel-control.stale { }
.panel-info { }
.panel-info h3 { }
.panel-info .status { }
.panel-button { }

/* Sliders */
.master-sliders-remote { }
.remote-slider-control { }
.panel-sliders-remote { }
.panel-slider-control { }
input[type="range"] { }

/* Global buttons */
.stop-all-btn { }
.update-all-btn { }
```

## Acceptance Criteria

1. **Remote loads base CSS externally** - No more inline styles in remote.html
2. **Remote loads skin CSS** - Reads skin preference, loads `/skins/{name}/remote.css`
3. **Graceful fallback** - Works if skin has no remote.css
4. **Default skin has remote.css** - Bundled default skin includes remote styling
5. **Glass skin demonstrates** - Glass skin has distinct remote appearance
6. **Skin schema documented** - `css.remote` option documented

## Files to Create/Modify

| File | Action |
|------|--------|
| `static/css/remote-base.css` | CREATE - extracted inline styles |
| `remote.html` | MODIFY - load external CSS, add skin loader |
| `public/skins/default/remote.css` | CREATE - default remote theme |
| `public/skins/default/skin.json` | MODIFY - add `css.remote` |
| `public/skins/glass/remote.css` | CREATE - glass remote theme |
| `public/skins/glass/skin.json` | MODIFY - add `css.remote` |
| `docs-source/extend/skins.md` | MODIFY - document remote.css |

## Estimated Effort

- Task 1 (Extract CSS): Small
- Task 2 (Skin loading): Small
- Task 3-4 (Skin remote.css files): Medium
- Task 5 (Documentation): Small

**Total: 1 development session**
